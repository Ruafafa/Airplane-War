!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).rexgridcutimageplugin=e();}(undefined,(function(){function t(t,r,n){return r=i(r),function(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,e()?Reflect.construct(r,n||[],i(t).constructor):r.apply(t,n))}function e(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));}catch(t){}return (e=function(){return !!t})()}function r(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return ("string"===e?String:Number)(t)}(t,"string");return "symbol"==typeof e?e:String(e)}function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o);}}function i(t){return i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},i(t)}function c(t,e){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},c(t,e)}var u=function(t,e,r,o,i,c){var u,a;null==r&&(r="__BASE"),c||(a=c,"object"===n(u=r)&&(u=u.name),void 0===a&&(a=","),c="__BASE"===u?function(t,e){return "".concat(t).concat(a).concat(e)}:function(t,e){return "".concat(u,"_").concat(t).concat(a).concat(e)});for(var f,l,s,p=t.sys.textures.get(e),y="object"===n(r)?r:p.get(r),b=y.width/o,d=y.height/i,g=y.cutX,m=y.cutY,h=0,v=0,j=0;j<i;j++){h=0;for(var O=0;O<o;O++)s=c(O,j),f=h+g,l=v+m,p.add(s,0,f,l,b,d),h+=b;v+=d;}return {getFrameNameCallback:c,cellWidth:b,cellHeight:d,columns:o,rows:i}},a=Phaser.Utils.Objects.GetValue,f=Phaser.GameObjects.Image,l=Phaser.Utils.Objects.IsPlainObject,s=Phaser.Math.RotateAround;return function(e){function r(e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),t(this,r,[e])}var n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e);}(r,Phaser.Plugins.BasePlugin),n=r,(i=[{key:"start",value:function(){this.game.events.on("destroy",this.destroy,this);}},{key:"gridCut",value:function(t,e,r,n){return function(t,e,r,n){l(e)&&(e=a(n=e,"columns",1),r=a(n,"rows",1));var o=a(n,"createImageCallback");if(!o){var i=a(n,"ImageClass",f);o=function(t,e,r){return new i(t,0,0,e,r)};}for(var c=a(n,"originX",.5),p=a(n,"originY",.5),y=a(n,"add",!0),b=a(n,"align",y),d=a(n,"objectPool",void 0),g=t.scene,m=t.texture,h=t.frame,v=u(g,m,h,e,r),j=v.getFrameNameCallback,O=t.scaleX,P=t.scaleY,w=t.rotation,_=t.getTopLeft(),S=_.x,x=_.y,T=[],E=v.cellWidth*O,k=v.cellHeight*P,C=0;C<r;C++)for(var B=0;B<e;B++){var R,I=j(B,C);if(R=d&&d.length>0?d.pop().setTexture(m,I):o(g,m,I),y&&g.add.existing(R),b){var A=S+E*B+c*E,N=x+k*C+p*k;R.setOrigin(c,p).setPosition(A,N).setScale(O,P).setRotation(w),s(R,S,x,w);}T.push(R);}return T}(t,e,r,n)}}])&&o(n.prototype,i),Object.defineProperty(n,"prototype",{writable:!1}),r}()}));
