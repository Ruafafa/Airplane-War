!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).rexlzstringplugin=t();}(undefined,(function(){function e(e,n,r){return n=s(n),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,t()?Reflect.construct(n,r||[],s(e).constructor):n.apply(e,r))}function t(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));}catch(e){}return (t=function(){return !!e})()}function n(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return ("string"===t?String:Number)(e)}(e,"string");return "symbol"==typeof t?t:String(t)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,n(o.key),o);}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function c(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var a={exports:{}};!function(e){var t=function(){function e(e,t){if(!o[e]){o[e]={};for(var n=0;n<e.length;n++)o[e][e.charAt(n)]=n;}return o[e][t]}var t=String.fromCharCode,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",o={},i={compressToBase64:function(e){if(null==e)return "";var t=i._compress(e,6,(function(e){return n.charAt(e)}));switch(t.length%4){default:case 0:return t;case 1:return t+"===";case 2:return t+"==";case 3:return t+"="}},decompressFromBase64:function(t){return null==t?"":""==t?null:i._decompress(t.length,32,(function(r){return e(n,t.charAt(r))}))},compressToUTF16:function(e){return null==e?"":i._compress(e,15,(function(e){return t(e+32)}))+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:i._decompress(e.length,16384,(function(t){return e.charCodeAt(t)-32}))},compressToUint8Array:function(e){for(var t=i.compress(e),n=new Uint8Array(2*t.length),r=0,o=t.length;o>r;r++){var s=t.charCodeAt(r);n[2*r]=s>>>8,n[2*r+1]=s%256;}return n},decompressFromUint8Array:function(e){if(null==e)return i.decompress(e);for(var n=new Array(e.length/2),r=0,o=n.length;o>r;r++)n[r]=256*e[2*r]+e[2*r+1];var s=[];return n.forEach((function(e){s.push(t(e));})),i.decompress(s.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":i._compress(e,6,(function(e){return r.charAt(e)}))},decompressFromEncodedURIComponent:function(t){return null==t?"":""==t?null:(t=t.replace(/ /g,"+"),i._decompress(t.length,32,(function(n){return e(r,t.charAt(n))})))},compress:function(e){return i._compress(e,16,(function(e){return t(e)}))},_compress:function(e,t,n){if(null==e)return "";var r,o,i,s={},u={},c="",a="",p="",f=2,l=3,h=2,d=[],m=0,y=0;for(i=0;i<e.length;i+=1)if(c=e.charAt(i),Object.prototype.hasOwnProperty.call(s,c)||(s[c]=l++,u[c]=!0),a=p+c,Object.prototype.hasOwnProperty.call(s,a))p=a;else {if(Object.prototype.hasOwnProperty.call(u,p)){if(p.charCodeAt(0)<256){for(r=0;h>r;r++)m<<=1,y==t-1?(y=0,d.push(n(m)),m=0):y++;for(o=p.charCodeAt(0),r=0;8>r;r++)m=m<<1|1&o,y==t-1?(y=0,d.push(n(m)),m=0):y++,o>>=1;}else {for(o=1,r=0;h>r;r++)m=m<<1|o,y==t-1?(y=0,d.push(n(m)),m=0):y++,o=0;for(o=p.charCodeAt(0),r=0;16>r;r++)m=m<<1|1&o,y==t-1?(y=0,d.push(n(m)),m=0):y++,o>>=1;}0==--f&&(f=Math.pow(2,h),h++),delete u[p];}else for(o=s[p],r=0;h>r;r++)m=m<<1|1&o,y==t-1?(y=0,d.push(n(m)),m=0):y++,o>>=1;0==--f&&(f=Math.pow(2,h),h++),s[a]=l++,p=String(c);}if(""!==p){if(Object.prototype.hasOwnProperty.call(u,p)){if(p.charCodeAt(0)<256){for(r=0;h>r;r++)m<<=1,y==t-1?(y=0,d.push(n(m)),m=0):y++;for(o=p.charCodeAt(0),r=0;8>r;r++)m=m<<1|1&o,y==t-1?(y=0,d.push(n(m)),m=0):y++,o>>=1;}else {for(o=1,r=0;h>r;r++)m=m<<1|o,y==t-1?(y=0,d.push(n(m)),m=0):y++,o=0;for(o=p.charCodeAt(0),r=0;16>r;r++)m=m<<1|1&o,y==t-1?(y=0,d.push(n(m)),m=0):y++,o>>=1;}0==--f&&(f=Math.pow(2,h),h++),delete u[p];}else for(o=s[p],r=0;h>r;r++)m=m<<1|1&o,y==t-1?(y=0,d.push(n(m)),m=0):y++,o>>=1;0==--f&&(f=Math.pow(2,h),h++);}for(o=2,r=0;h>r;r++)m=m<<1|1&o,y==t-1?(y=0,d.push(n(m)),m=0):y++,o>>=1;for(;;){if(m<<=1,y==t-1){d.push(n(m));break}y++;}return d.join("")},decompress:function(e){return null==e?"":""==e?null:i._decompress(e.length,32768,(function(t){return e.charCodeAt(t)}))},_decompress:function(e,n,r){var o,i,s,u,c,a,p,f=[],l=4,h=4,d=3,m="",y=[],v={val:r(0),position:n,index:1};for(o=0;3>o;o+=1)f[o]=o;for(s=0,c=Math.pow(2,2),a=1;a!=c;)u=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),s|=(u>0?1:0)*a,a<<=1;switch(s){case 0:for(s=0,c=Math.pow(2,8),a=1;a!=c;)u=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),s|=(u>0?1:0)*a,a<<=1;p=t(s);break;case 1:for(s=0,c=Math.pow(2,16),a=1;a!=c;)u=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),s|=(u>0?1:0)*a,a<<=1;p=t(s);break;case 2:return ""}for(f[3]=p,i=p,y.push(p);;){if(v.index>e)return "";for(s=0,c=Math.pow(2,d),a=1;a!=c;)u=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),s|=(u>0?1:0)*a,a<<=1;switch(p=s){case 0:for(s=0,c=Math.pow(2,8),a=1;a!=c;)u=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),s|=(u>0?1:0)*a,a<<=1;f[h++]=t(s),p=h-1,l--;break;case 1:for(s=0,c=Math.pow(2,16),a=1;a!=c;)u=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),s|=(u>0?1:0)*a,a<<=1;f[h++]=t(s),p=h-1,l--;break;case 2:return y.join("")}if(0==l&&(l=Math.pow(2,d),d++),f[p])m=f[p];else {if(p!==h)return null;m=i+i.charAt(0);}y.push(m),f[h++]=i+m.charAt(0),i=m,0==--l&&(l=Math.pow(2,d),d++);}}};return i}();null!=e&&(e.exports=t);}(a);var p=c(a.exports),f=Phaser.Utils.Objects.GetFastValue,l=function(){function e(t){r(this,e),this.resetFromJSON(t);}return i(e,[{key:"resetFromJSON",value:function(e){return this.setEncoding(f(e,"encoding",0)),this}},{key:"toJSON",value:function(){return {encoding:this.encoding}}},{key:"setEncoding",value:function(e){return void 0===e?e=0:"string"==typeof e&&(e=h[e.toLowerCase()]||0),this.encoding=e,this}},{key:"compress",value:function(e){var t=d[this.encoding];return p[t](e)}},{key:"decompress",value:function(e){var t=m[this.encoding];return p[t](e)}}]),e}(),h={none:0,base64:1,utf16:2,uri:3},d=["compress","compressToBase64","compressToUTF16","compressToEncodedURIComponent"],m=["decompress","decompressFromBase64","decompressFromUTF16","decompressFromEncodedURIComponent"];return function(t){function n(t){var o;return r(this,n),(o=e(this,n,[t])).lzstring=new l,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t);}(n,Phaser.Plugins.BasePlugin),i(n,[{key:"start",value:function(){this.game.events.on("destroy",this.destroy,this);}},{key:"destroy",value:function(){this.lzstring=null,this.pluginManager=null,this.game=null,this.scene=null,this.systems=null;}},{key:"add",value:function(e){return new l(e)}}]),n}()}));
