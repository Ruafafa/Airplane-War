!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):(t="undefined"!=typeof globalThis?globalThis:t||self).rexquadshapeplugin=i();}(undefined,(function(){function t(t,e,n){return e=l(e),function(t,i){if(i&&("object"==typeof i||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,i()?Reflect.construct(e,n||[],l(t).constructor):e.apply(t,n))}function i(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));}catch(t){}return (i=function(){return !!t})()}function e(t){var i=function(t,i){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,i||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return ("string"===i?String:Number)(t)}(t,"string");return "symbol"==typeof i?i:String(i)}function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function r(t,i){for(var n=0;n<i.length;n++){var o=i[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,e(o.key),o);}}function s(t,i,e){return i&&r(t.prototype,i),e&&r(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function h(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),i&&u(t,i);}function l(t){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},l(t)}function u(t,i){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t},u(t,i)}var a=Phaser.Renderer.WebGL.Utils,f=Phaser.Renderer.WebGL.Utils,c=Phaser.GameObjects.GetCalcMatrix,d=Phaser.Renderer.Canvas.SetTransform,y={renderWebGL:function(t,i,e,n){i.dirty&&(i.updateData(),i.dirty=!1),e.addToRenderList(i);var o=t.pipelines.set(i.pipeline),r=c(i,e,n),s=o.calcMatrix.copyFrom(r.calc),h=i._displayOriginX,l=i._displayOriginY,u=e.alpha*i.alpha;t.pipelines.preBatch(i),i.isFilled&&function(t,i,e,n,o,r){for(var s=a.getTintAppendFloatAlpha(e.fillColor,e.fillAlpha*n),h=e.pathData,l=e.pathIndexes,u=0;u<l.length;u+=3){var f=2*l[u],c=2*l[u+1],d=2*l[u+2],y=h[f+0]-o,g=h[f+1]-r,p=h[c+0]-o,P=h[c+1]-r,v=h[d+0]-o,b=h[d+1]-r,S=i.getX(y,g),m=i.getY(y,g),k=i.getX(p,P),x=i.getY(p,P),T=i.getX(v,b),O=i.getY(v,b);t.batchTri(e,S,m,k,x,T,O,0,0,1,1,s,s,s,2);}}(o,s,i,u,h,l),i.isStroked&&function(t,i,e,n,o){var r=t.strokeTint,s=f.getTintAppendFloatAlpha(i.strokeColor,i.strokeAlpha*e);r.TL=s,r.TR=s,r.BL=s,r.BR=s;var h=i.pathData,l=h.length-1,u=i.lineWidth,a=u/2,c=h[0]-n,d=h[1]-o;i.closePath||(l-=2);for(var y=2;y<l;y+=2){var g=h[y]-n,p=h[y+1]-o;t.batchLine(c,d,g,p,a,a,u,y-2,!!i.closePath&&y===l-1),c=g,d=p;}}(o,i,u,h,l),t.pipelines.postBatch(i);},renderCanvas:function(t,i,e,n){i.dirty&&(i.updateData(),i.dirty=!1),e.addToRenderList(i);var o=t.currentContext;if(d(t,o,i,e,n)){var r=i._displayOriginX,s=i._displayOriginY,h=i.pathData,l=h.length-1,u=h[0]-r,a=h[1]-s;o.beginPath(),o.moveTo(u,a),i.closePath||(l-=2);for(var f=2;f<l;f+=2){var c=h[f]-r,y=h[f+1]-s;o.lineTo(c,y);}o.closePath(),i.isFilled&&(!function(t,i,e,n){var o=e||i.fillColor,r=n||i.fillAlpha,s=(16711680&o)>>>16,h=(65280&o)>>>8,l=255&o;t.fillStyle="rgba("+s+","+h+","+l+","+r+")";}(o,i),o.fill()),i.isStroked&&(!function(t,i,e,n){var o=e||i.strokeColor,r=n||i.strokeAlpha,s=(16711680&o)>>>16,h=(65280&o)>>>8,l=255&o;t.strokeStyle="rgba("+s+","+h+","+l+","+r+")",t.lineWidth=i.lineWidth;}(o,i),o.stroke()),o.restore();}}},g=function(i){function e(){return o(this,e),t(this,e,arguments)}return h(e,i),s(e,[{key:"fillColor",get:function(){return this._fillColor},set:function(t){this._fillColor=t,this.isFilled=null!=t&&this._fillAlpha>0;}},{key:"fillAlpha",get:function(){return this._fillAlpha},set:function(t){this._fillAlpha=t,this.isFilled=t>0&&null!=this._fillColor;}},{key:"setFillStyle",value:function(t,i){return void 0===i&&(i=1),this.fillColor=t,this.fillAlpha=i,this}},{key:"strokeColor",get:function(){return this._strokeColor},set:function(t){this._strokeColor=t,this.isStroked=null!=t&&this._strokeAlpha>0&&this._lineWidth>0;}},{key:"strokeAlpha",get:function(){return this._strokeAlpha},set:function(t){this._strokeAlpha=t,this.isStroked=t>0&&null!=this._strokeColor&&this._lineWidth>0;}},{key:"lineWidth",get:function(){return this._lineWidth},set:function(t){this._lineWidth=t,this.isStroked=t>0&&null!=this._strokeColor;}},{key:"setStrokeStyle",value:function(t,i,e){return void 0===e&&(e=1),this.lineWidth=t,this.strokeColor=i,this.strokeAlpha=e,this}},{key:"updateData",value:function(){return this}},{key:"width",get:function(){return this.geom.width},set:function(t){this.resize(t,this.height);}},{key:"height",get:function(){return this.geom.height},set:function(t){this.resize(this.width,t);}},{key:"setSize",value:function(t,i){var e=this.input;return e&&!e.customHitArea&&(e.hitArea.width=t,e.hitArea.height=i),this}},{key:"resize",value:function(t,i){return this.setSize(t,i),this}}]),e}(Phaser.GameObjects.Shape);Object.assign(g.prototype,y);var p=function(t,i,e){i&&!function(t,i){if(!t)return !1;if(t.hasOwnProperty(i))return !0;for(;t;){if(Object.getOwnPropertyDescriptor(t,i))return !0;t=t.__proto__;}return !1}(t,"".concat(i,"X"))&&(Object.defineProperty(t,"".concat(i,"X"),{get:function(){return e.x},set:function(i){e.x=i,t.dirty=!0;}}),Object.defineProperty(t,"".concat(i,"Y"),{get:function(){return e.y},set:function(i){e.y=i,t.dirty=!0;}}),Object.defineProperty(t,"".concat(i,"T"),{get:function(){return e.t},set:function(i){e.t=i,t.dirty=!0;}}));},P={setTLPosition:function(t,i){return this.geom.setTLPosition(t,i),this.dirty=!0,this},setTRPosition:function(t,i){return this.geom.setTRPosition(t,i),this.dirty=!0,this},setBLPosition:function(t,i){return this.geom.setBLPosition(t,i),this.dirty=!0,this},setBRPosition:function(t,i){return this.geom.setBRPosition(t,i),this.dirty=!0,this},resetCornerPosition:function(){return this.geom.resetCornerPosition(),this.dirty=!0,this},insertTopSidePoint:function(t,i,e,n){var o=this.geom.topSidePoints;if(Array.isArray(t))for(var r,s=0,h=(o=t).length;s<h;s++)r=o[s],this.geom.insertTopSidePoint(r.t,r.x,r.y),p(this,r.key,o[o.length-1]);else this.geom.insertTopSidePoint(t,i,e),p(this,n,o[o.length-1]);return this.dirty=!0,this},insertRightSidePoint:function(t,i,e,n){var o=this.geom.rightSidePoints;if(Array.isArray(t))for(var r,s=0,h=(o=t).length;s<h;s++)r=o[s],this.geom.insertRightSidePoint(r.t,r.x,r.y),p(this,r.key,o[o.length-1]);else this.geom.insertRightSidePoint(t,i,e),p(this,n,o[o.length-1]);return this.dirty=!0,this},insertBottomSidePoint:function(t,i,e,n){var o=this.geom.bottomSidePoints;if(Array.isArray(t))for(var r,s=0,h=(o=t).length;s<h;s++)r=o[s],this.geom.insertBottomSidePoint(r.t,r.x,r.y),p(this,r.key,o[o.length-1]);else this.geom.insertBottomSidePoint(t,i,e),p(this,n,o[o.length-1]);return this.dirty=!0,this},insertLeftSidePoint:function(t,i,e,n){var o=this.geom.leftSidePoints;if(Array.isArray(t))for(var r,s=0,h=(o=t).length;s<h;s++)r=o[s],this.geom.insertLeftSidePoint(r.t,r.x,r.y),p(this,r.key,o[o.length-1]);else this.geom.insertLeftSidePoint(t,i,e),p(this,n,o[o.length-1]);return this.dirty=!0,this},clearTopSidePoints:function(){return this.geom.clearTopSidePoints(),this.dirty=!0,this},clearRightSidePoints:function(){return this.geom.clearRightSidePoints(),this.dirty=!0,this},clearBottomSidePoints:function(){return this.geom.clearBottomSidePoints(),this.dirty=!0,this},clearLeftSidePoints:function(){return this.geom.clearLeftSidePoints(),this.dirty=!0,this},clearAllSidesPoints:function(){return this.geom.clearAllSidesPoints(),this.dirty=!0,this}},v=function(){function t(i,e,n,r){o(this,t),void 0===i&&(i=0),void 0===e&&(e=i),void 0===n&&(n=0),void 0===r&&(r=0),this.setTo(i,e,n,r),this.tlx=0,this.tly=0,this.trx=0,this.try=0,this.blx=0,this.bly=0,this.brx=0,this.bry=0,this.topSidePoints=[],this.rightSidePoints=[],this.bottomSidePoints=[],this.leftSidePoints=[];}return s(t,[{key:"setTo",value:function(t,i,e,n){return this.setPosition(t,i),this.setSize(e,n),this}},{key:"setPosition",value:function(t,i){return this.x=t,this.y=i,this}},{key:"setSize",value:function(t,i){return this.width=t,this.height=i,this}},{key:"setTLPosition",value:function(t,i){return this.tlx=t,this.tly=i,this}},{key:"setTRPosition",value:function(t,i){return this.trx=t,this.try=i,this}},{key:"setBLPosition",value:function(t,i){return this.blx=t,this.bly=i,this}},{key:"setBRPosition",value:function(t,i){return this.brx=t,this.bry=i,this}},{key:"resetCornerPosition",value:function(){return this.setTLPosition(0,0).setTRPosition(0,0).setBLPosition(0,0).setBRPosition(0,0),this}},{key:"insertTopSidePoint",value:function(t,i,e){return b(this.topSidePoints,t,i,e),this}},{key:"insertRightSidePoint",value:function(t,i,e){return b(this.rightSidePoints,t,i,e),this}},{key:"insertBottomSidePoint",value:function(t,i,e){return b(this.bottomSidePoints,t,i,e),this}},{key:"insertLeftSidePoint",value:function(t,i,e){return b(this.leftSidePoints,t,i,e),this}},{key:"clearTopSidePoints",value:function(){return this.topSidePoints.length=0,this}},{key:"clearRightSidePoints",value:function(){return this.rightSidePoints.length=0,this}},{key:"clearBottomSidePoints",value:function(){return this.bottomSidePoints.length=0,this}},{key:"clearLeftSidePoints",value:function(){return this.leftSidePoints.length=0,this}},{key:"clearAllSidesPoints",value:function(){return this.clearTopSidePoints().clearRightSidePoints().clearBottomSidePoints().clearLeftSidePoints(),this}}]),t}(),b=function(t,i,e,n){if("number"!=typeof i){var o=i;i=o.t,e=o.x,n=o.y;}t.push({t:i,x:e,y:n});},S=function(t,i,e){var n=e.length;if(n>=2){var o=e[n-2],r=e[n-1];if(t===o&&i===r)return e}return e.push(t,i),e},m=Phaser.Utils.Objects.IsPlainObject,k=Phaser.Utils.Objects.GetValue,x=Phaser.Math.Linear,T=Phaser.Geom.Polygon.Earcut,O=function(i){function e(i,n,r,s,h,l,u){var a,f,c,d;if(o(this,e),m(n)){var y=n;n=y.x,r=y.y,s=y.width,h=y.height,l=y.color,u=y.alpha,f=y.strokeColor,c=y.strokeAlpha,d=y.strokeWidth;}void 0===n&&(n=0),void 0===r&&(r=0),void 0===s&&(s=1),void 0===h&&(h=s);var g=new v;a=t(this,e,[i,"rexQuadShape",g]),g.setTo(0,0,s,h),a.setPosition(n,r),a.setFillStyle(l,u),void 0!==f&&void 0===d&&(d=2),a.setStrokeStyle(d,f,c),a.setTLPosition(k(y,"tlx",0),k(y,"tly",0)).setTRPosition(k(y,"trx",0),k(y,"try",0)).setBLPosition(k(y,"blx",0),k(y,"bly",0)).setBRPosition(k(y,"brx",0),k(y,"bry",0));var p=k(y,"leftSidePoints");p&&a.insertLeftSidePoint(p);var P=k(y,"topSidePoints");P&&a.insertTopSidePoint(P);var b=k(y,"rightSidePoints");b&&a.insertRightSidePoint(b);var S=k(y,"bottomSidePoints");return S&&a.insertBottomSidePoint(S),a.updateDisplayOrigin(),a.dirty=!0,a}return h(e,i),s(e,[{key:"updateData",value:function(){var t=this.geom,i=this.pathData;i.length=0;var e=t.width,n=t.height,o=0+t.tlx,r=0+t.tly,s=e+t.trx,h=0+t.try,l=e+t.brx,u=n+t.bry,a=0+t.blx,f=n+t.bly,c=t.topSidePoints,d=t.rightSidePoints,y=t.bottomSidePoints,g=t.leftSidePoints;S(o,r,i),A(c);for(var p=0,P=c.length;p<P;p++){var v=c[p],b=x(o,s,v.t)+v.x,m=x(r,h,v.t)+v.y;S(b,m,i);}S(s,h,i),A(d);for(p=0,P=d.length;p<P;p++){v=d[p],b=x(s,l,v.t)+v.x,m=x(h,u,v.t)+v.y;S(b,m,i);}S(l,u,i),A(y);for(p=y.length-1;p>=0;p--){v=y[p],b=x(a,l,v.t)+v.x,m=x(f,u,v.t)+v.y;S(b,m,i);}S(a,f,i),A(g);for(p=g.length-1;p>=0;p--){v=g[p],b=x(o,a,v.t)+v.x,m=x(r,f,v.t)+v.y;S(b,m,i);}return i.push(i[0],i[1]),this.pathIndexes=T(i),this}},{key:"tlx",get:function(){return this.geom.tlx},set:function(t){this.geom.tlx=t,this.dirty=!0;}},{key:"tly",get:function(){return this.geom.tly},set:function(t){this.geom.tly=t,this.dirty=!0;}},{key:"trx",get:function(){return this.geom.trx},set:function(t){this.geom.trx=t,this.dirty=!0;}},{key:"try",get:function(){return this.geom.try},set:function(t){this.geom.try=t,this.dirty=!0;}},{key:"blx",get:function(){return this.geom.blx},set:function(t){this.geom.blx=t,this.dirty=!0;}},{key:"bly",get:function(){return this.geom.bly},set:function(t){this.geom.bly=t,this.dirty=!0;}},{key:"brx",get:function(){return this.geom.brx},set:function(t){this.geom.brx=t,this.dirty=!0;}},{key:"bry",get:function(){return this.geom.bry},set:function(t){this.geom.bry=t,this.dirty=!0;}},{key:"leftSidePoints",get:function(){return this.geom.leftSidePoints}},{key:"topSidePoints",get:function(){return this.geom.topSidePoints}},{key:"bottomSidePoints",get:function(){return this.geom.bottomSidePoints}},{key:"rightSidePoints",get:function(){return this.geom.rightSidePoints}}]),e}(g),A=function(t){t.length<=1||t.sort((function(t,i){return t.t-i.t}));};function j(t,i,e,n,o,r){var s=new O(this.scene,t,i,e,n,o,r);return this.scene.add.existing(s),s}Object.assign(O.prototype,P);var _=Phaser.Utils.Objects.GetAdvancedValue,R=Phaser.GameObjects.BuildGameObject;function w(t,i){void 0===t&&(t={}),void 0!==i&&(t.add=i);var e=_(t,"width",void 0),n=_(t,"height",e),o=_(t,"fillColor",void 0),r=_(t,"fillAlpha",void 0),s=new O(this.scene,0,0,e,n,o,r);return R(this.scene,s,t),s}var L=function(t){return null==t||""===t||0===t.length},B=function(i){function e(i){var n;return o(this,e),n=t(this,e,[i]),i.registerGameObject("rexQuadShape",j,w),n}return h(e,Phaser.Plugins.BasePlugin),s(e,[{key:"start",value:function(){this.game.events.on("destroy",this.destroy,this);}}]),e}();return function(t,i,e,o){if(void 0===o&&(o="."),"object"===n(t)){if(L(i)){if(null==e)return;"object"===n(e)&&(t=e);}else {"string"==typeof i&&(i=i.split(o));var r=i.pop(),s=function(t,i,e){var o=t;if(L(i));else {var r;"string"==typeof i&&(i=i.split("."));for(var s=0,h=i.length;s<h;s++){var l;null!=o[r=i[s]]&&"object"===n(o[r])||(l=s===h-1?void 0===e?{}:e:{},o[r]=l),o=o[r];}}return o}(t,i);s[r]=e;}}}(window,"RexPlugins.GameObjects.QuadShape",O),B}));
