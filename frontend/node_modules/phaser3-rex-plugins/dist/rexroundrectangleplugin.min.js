!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).rexroundrectangleplugin=e();}(undefined,(function(){function t(t,i,r){return i=a(i),function(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,e()?Reflect.construct(i,r||[],a(t).constructor):i.apply(t,r))}function e(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));}catch(t){}return (e=function(){return !!t})()}function i(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return ("string"===e?String:Number)(t)}(t,"string");return "symbol"==typeof e?e:String(e)}function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,i(n.key),n);}}function s(t,e,i){return e&&o(t.prototype,e),i&&o(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e);}function a(t){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},a(t)}function h(t,e){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},h(t,e)}function l(){return l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=a(t)););return t}(t,e);if(r){var n=Object.getOwnPropertyDescriptor(r,e);return n.get?n.get.call(arguments.length<3?t:i):n.value}},l.apply(this,arguments)}var c=Phaser.Renderer.WebGL.Utils,f=Phaser.Renderer.WebGL.Utils,d=Phaser.GameObjects.GetCalcMatrix,y=Phaser.Renderer.Canvas.SetTransform,p={renderWebGL:function(t,e,i,r){e.dirty&&(e.updateData(),e.dirty=!1),i.addToRenderList(e);var n=t.pipelines.set(e.pipeline),o=d(e,i,r),s=n.calcMatrix.copyFrom(o.calc),u=e._displayOriginX,a=e._displayOriginY,h=i.alpha*e.alpha;t.pipelines.preBatch(e),e.isFilled&&function(t,e,i,r,n,o){for(var s=c.getTintAppendFloatAlpha(i.fillColor,i.fillAlpha*r),u=i.pathData,a=i.pathIndexes,h=0;h<a.length;h+=3){var l=2*a[h],f=2*a[h+1],d=2*a[h+2],y=u[l+0]-n,p=u[l+1]-o,v=u[f+0]-n,g=u[f+1]-o,b=u[d+0]-n,k=u[d+1]-o,m=e.getX(y,p),x=e.getY(y,p),R=e.getX(v,g),_=e.getY(v,g),O=e.getX(b,k),P=e.getY(b,k);t.batchTri(i,m,x,R,_,O,P,0,0,1,1,s,s,s,2);}}(n,s,e,h,u,a),e.isStroked&&function(t,e,i,r,n){var o=t.strokeTint,s=f.getTintAppendFloatAlpha(e.strokeColor,e.strokeAlpha*i);o.TL=s,o.TR=s,o.BL=s,o.BR=s;var u=e.pathData,a=u.length-1,h=e.lineWidth,l=h/2,c=u[0]-r,d=u[1]-n;e.closePath||(a-=2);for(var y=2;y<a;y+=2){var p=u[y]-r,v=u[y+1]-n;t.batchLine(c,d,p,v,l,l,h,y-2,!!e.closePath&&y===a-1),c=p,d=v;}}(n,e,h,u,a),t.pipelines.postBatch(e);},renderCanvas:function(t,e,i,r){e.dirty&&(e.updateData(),e.dirty=!1),i.addToRenderList(e);var n=t.currentContext;if(y(t,n,e,i,r)){var o=e._displayOriginX,s=e._displayOriginY,u=e.pathData,a=u.length-1,h=u[0]-o,l=u[1]-s;n.beginPath(),n.moveTo(h,l),e.closePath||(a-=2);for(var c=2;c<a;c+=2){var f=u[c]-o,d=u[c+1]-s;n.lineTo(f,d);}n.closePath(),e.isFilled&&(!function(t,e,i,r){var n=i||e.fillColor,o=r||e.fillAlpha,s=(16711680&n)>>>16,u=(65280&n)>>>8,a=255&n;t.fillStyle="rgba("+s+","+u+","+a+","+o+")";}(n,e),n.fill()),e.isStroked&&(!function(t,e,i,r){var n=i||e.strokeColor,o=r||e.strokeAlpha,s=(16711680&n)>>>16,u=(65280&n)>>>8,a=255&n;t.strokeStyle="rgba("+s+","+u+","+a+","+o+")",t.lineWidth=e.lineWidth;}(n,e),n.stroke()),n.restore();}}},v=function(e){function i(){return n(this,i),t(this,i,arguments)}return u(i,e),s(i,[{key:"fillColor",get:function(){return this._fillColor},set:function(t){this._fillColor=t,this.isFilled=null!=t&&this._fillAlpha>0;}},{key:"fillAlpha",get:function(){return this._fillAlpha},set:function(t){this._fillAlpha=t,this.isFilled=t>0&&null!=this._fillColor;}},{key:"setFillStyle",value:function(t,e){return void 0===e&&(e=1),this.fillColor=t,this.fillAlpha=e,this}},{key:"strokeColor",get:function(){return this._strokeColor},set:function(t){this._strokeColor=t,this.isStroked=null!=t&&this._strokeAlpha>0&&this._lineWidth>0;}},{key:"strokeAlpha",get:function(){return this._strokeAlpha},set:function(t){this._strokeAlpha=t,this.isStroked=t>0&&null!=this._strokeColor&&this._lineWidth>0;}},{key:"lineWidth",get:function(){return this._lineWidth},set:function(t){this._lineWidth=t,this.isStroked=t>0&&null!=this._strokeColor;}},{key:"setStrokeStyle",value:function(t,e,i){return void 0===i&&(i=1),this.lineWidth=t,this.strokeColor=e,this.strokeAlpha=i,this}},{key:"updateData",value:function(){return this}},{key:"width",get:function(){return this.geom.width},set:function(t){this.resize(t,this.height);}},{key:"height",get:function(){return this.geom.height},set:function(t){this.resize(this.width,t);}},{key:"setSize",value:function(t,e){var i=this.input;return i&&!i.customHitArea&&(i.hitArea.width=t,i.hitArea.height=e),this}},{key:"resize",value:function(t,e){return this.setSize(t,e),this}}]),i}(Phaser.GameObjects.Shape);Object.assign(v.prototype,p);var g=Phaser.Utils.Objects.GetValue,b=function(){function t(e,i,r,o,s){n(this,t),void 0===e&&(e=0),void 0===i&&(i=e),void 0===r&&(r=0),void 0===o&&(o=0),void 0===s&&(s=0),this.cornerRadius={},this._width=0,this._height=0,this.setTo(e,i,r,o,s);}return s(t,[{key:"setTo",value:function(t,e,i,r,n){return this.setPosition(t,e),this.setRadius(n),this.setSize(i,r),this}},{key:"setPosition",value:function(t,e){return this.x=t,this.y=e,this}},{key:"setRadius",value:function(t){return void 0===t&&(t=0),this.radius=t,this}},{key:"setSize",value:function(t,e){return this.width=t,this.height=e,this}},{key:"minWidth",get:function(){var t=this.cornerRadius;return Math.max(t.tl.x+t.tr.x,t.bl.x+t.br.x)}},{key:"minHeight",get:function(){var t=this.cornerRadius;return Math.max(t.tl.y+t.bl.y,t.tr.y+t.br.y)}},{key:"width",get:function(){return this._width},set:function(t){null==t&&(t=0),this._width=Math.max(t,this.minWidth);}},{key:"height",get:function(){return this._height},set:function(t){null==t&&(t=0),this._height=Math.max(t,this.minHeight);}},{key:"radius",get:function(){var t=this.cornerRadius;return Math.max(t.tl.x,t.tl.y,t.tr.x,t.tr.y,t.bl.x,t.bl.y,t.br.x,t.br.y)},set:function(t){var e,i;"number"==typeof t?(e=t,i=t):(e=g(t,"x",0),i=g(t,"y",0));var r=this.cornerRadius;r.tl=k(g(t,"tl",void 0),e,i),r.tr=k(g(t,"tr",void 0),e,i),r.bl=k(g(t,"bl",void 0),e,i),r.br=k(g(t,"br",void 0),e,i);}},{key:"radiusTL",get:function(){var t=this.cornerRadius.tl;return Math.max(t.x,t.y)},set:function(t){m(this.cornerRadius.tl,t);}},{key:"radiusTR",get:function(){var t=this.cornerRadius.tr;return Math.max(t.x,t.y)},set:function(t){m(this.cornerRadius.tr,t);}},{key:"radiusBL",get:function(){var t=this.cornerRadius.bl;return Math.max(t.x,t.y)},set:function(t){m(this.cornerRadius.bl,t);}},{key:"radiusBR",get:function(){var t=this.cornerRadius.br;return Math.max(t.x,t.y)},set:function(t){m(this.cornerRadius.br,t);}}]),t}(),k=function(t,e,i){return void 0===t?t={x:e,y:i}:"number"==typeof t&&(t={x:t,y:t}),x(t),t},m=function(t,e){"number"==typeof e?(t.x=e,t.y=e):(t.x=g(e,"x",0),t.y=g(e,"y",0)),x(t);},x=function(t){t.convex=t.x>=0||t.y>=0,t.x=Math.abs(t.x),t.y=Math.abs(t.y);},R=function(t,e,i){var r=i.length;if(r>=2){var n=i[r-2],o=i[r-1];if(t===n&&e===o)return i}return i.push(t,e),i},_=Phaser.Math.DegToRad,O=function(t,e,i,r,n,o,s,u,a){s&&o>n?o-=360:!s&&o<n&&(o+=360);var h=_(o-n)/u;n=_(n);for(var l=0;l<=u;l++){var c=n+h*l,f=t+i*Math.cos(c),d=e+r*Math.sin(c);R(f,d,a);}return a},P=Phaser.Utils.Objects.IsPlainObject,T=Phaser.Utils.Objects.GetValue,w=Phaser.Geom.Polygon.Earcut,S=function(e){function i(e,r,o,s,u,a,h,l){var c,f,d,y,p;if(n(this,i),P(r)){var v=r;r=v.x,o=v.y,s=v.width,u=v.height,a=v.radius,h=v.color,l=v.alpha,f=v.strokeColor,d=v.strokeAlpha,y=v.strokeWidth,p=v.shape;}void 0===r&&(r=0),void 0===o&&(o=0),void 0===s&&(s=1),void 0===u&&(u=s),void 0===a&&(a=0),void 0===p&&(p=0);var g=new b;if((c=t(this,i,[e,"rexRoundRectangleShape",g])).setShapeType(p),0===c.shapeType){var k=T(a,"radius",a);g.setTo(0,0,s,u,k);}else {k={x:s/2,y:u/2};g.setTo(0,0,s,u,k);}var m=T(a,"iteration",void 0);return c.setIteration(m),c.setPosition(r,o),c.setFillStyle(h,l),void 0!==f&&void 0===y&&(y=2),c.setStrokeStyle(y,f,d),c.updateDisplayOrigin(),c.dirty=!0,c}return u(i,e),s(i,[{key:"updateData",value:function(){var t=this.geom,e=this.pathData;e.length=0;var i,r=t.width,n=t.height,o=t.cornerRadius,s=this.iteration+1;if(i=o.tl,j(i))if(i.convex){var u=i.x,a=i.y;O(u,a,i.x,i.y,180,270,!1,s,e);}else {O(u=0,a=0,i.x,i.y,90,0,!0,s,e);}else R(0,0,e);if(i=o.tr,j(i))if(i.convex){u=r-i.x,a=i.y;O(u,a,i.x,i.y,270,360,!1,s,e);}else {O(u=r,a=0,i.x,i.y,180,90,!0,s,e);}else R(r,0,e);if(i=o.br,j(i))if(i.convex){u=r-i.x,a=n-i.y;O(u,a,i.x,i.y,0,90,!1,s,e);}else {O(u=r,a=n,i.x,i.y,270,180,!0,s,e);}else R(r,n,e);if(i=o.bl,j(i))if(i.convex){u=i.x,a=n-i.y;O(u,a,i.x,i.y,90,180,!1,s,e);}else {O(u=0,a=n,i.x,i.y,360,270,!0,s,e);}else R(0,n,e);return e.push(e[0],e[1]),this.pathIndexes=w(e),this}},{key:"setShapeType",value:function(t){return "string"==typeof t&&(t=A[t]),this.shapeType=t,this}},{key:"setSize",value:function(t,e){return void 0===e&&(e=t),this.geom.width===t&&this.geom.height===e||(this.geom.setSize(t,e),1===this.shapeType&&this.setRadius({x:t/2,y:e/2}),this.updateDisplayOrigin(),this.dirty=!0,l(a(i.prototype),"setSize",this).call(this,t,e)),this}},{key:"radius",get:function(){return this.geom.radius},set:function(t){this.geom.setRadius(t),this.updateDisplayOrigin(),this.dirty=!0;}},{key:"radiusTL",get:function(){return this.geom.radiusTL},set:function(t){this.geom.radiusTL=t,this.dirty=!0;}},{key:"radiusTR",get:function(){return this.geom.radiusTR},set:function(t){this.geom.radiusTR=t,this.dirty=!0;}},{key:"radiusBL",get:function(){return this.geom.radiusBL},set:function(t){this.geom.radiusBL=t,this.dirty=!0;}},{key:"radiusBR",get:function(){return this.geom.radiusBR},set:function(t){this.geom.radiusBR=t,this.dirty=!0;}},{key:"setRadius",value:function(t){return void 0===t&&(t=0),this.radius=t,this}},{key:"setRadiusTL",value:function(t){return void 0===t&&(t=0),this.radiusTL=t,this}},{key:"setRadiusTR",value:function(t){return void 0===t&&(t=0),this.radiusTR=t,this}},{key:"setRadiusBL",value:function(t){return void 0===t&&(t=0),this.radiusBL=t,this}},{key:"setRadiusBR",value:function(t){return void 0===t&&(t=0),this.radiusBR=t,this}},{key:"cornerRadius",get:function(){return this.geom.cornerRadius},set:function(t){this.radius=t;}},{key:"setCornerRadius",value:function(t){return this.setRadius(t)}},{key:"iteration",get:function(){return this._iteration},set:function(t){void 0!==this._iteration?this._iteration!==t&&(this._iteration=t,this.dirty=!0):this._iteration=t;}},{key:"setIteration",value:function(t){return void 0===t&&(t=6),this.iteration=t,this}}]),i}(v),j=function(t){return t.x>0&&t.y>0},A={rectangle:0,circle:1};function C(t,e,i,r,n,o,s){var u=new S(this.scene,t,e,i,r,n,o,s);return this.scene.add.existing(u),u}var B=Phaser.Utils.Objects.GetAdvancedValue,L=Phaser.Utils.Objects.GetValue,M=Phaser.GameObjects.BuildGameObject;function G(t,e){void 0===t&&(t={}),void 0!==e&&(t.add=e);var i=B(t,"width",void 0),r=B(t,"height",i),n=L(t,"radius",void 0),o=B(t,"fillColor",void 0),s=B(t,"fillAlpha",void 0),u=new S(this.scene,0,0,i,r,n,o,s);return M(this.scene,u,t),u}var W=function(t){return null==t||""===t||0===t.length},D=function(e){function i(e){var r;return n(this,i),r=t(this,i,[e]),e.registerGameObject("rexRoundRectangle",C,G),r}return u(i,Phaser.Plugins.BasePlugin),s(i,[{key:"start",value:function(){this.game.events.on("destroy",this.destroy,this);}}]),i}();return function(t,e,i,n){if(void 0===n&&(n="."),"object"===r(t)){if(W(e)){if(null==i)return;"object"===r(i)&&(t=i);}else {"string"==typeof e&&(e=e.split(n));var o=e.pop(),s=function(t,e,i){var n=t;if(W(e));else {var o;"string"==typeof e&&(e=e.split("."));for(var s=0,u=e.length;s<u;s++){var a;null!=n[o=e[s]]&&"object"===r(n[o])||(a=s===u-1?void 0===i?{}:i:{},n[o]=a),n=n[o];}}return n}(t,e);s[o]=i;}}}(window,"RexPlugins.GameObjects.RoundRectangle",S),D}));
